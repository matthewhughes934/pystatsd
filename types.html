<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Types &mdash; Python StatsD 3.3.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using Timers" href="timing.html" />
    <link rel="prev" title="Configuring Statsd" href="configure.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Python StatsD
          </a>
              <div class="version">
                3.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="configure.html">Configuring Statsd</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#counters">Counters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timers">Timers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gauges">Gauges</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gauge-deltas">Gauge Deltas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sets">Sets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="timing.html">Using Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcp.html">TCPStatsClient</a></li>
<li class="toctree-l1"><a class="reference internal" href="unix_socket.html">UnixSocketStatsClient</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tags.html">Unsupported: Tagging Metrics</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python StatsD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Data Types</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/types.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-types">
<span id="types-chapter"></span><h1>Data Types<a class="headerlink" href="#data-types" title="Permalink to this heading"></a></h1>
<p>The <a class="reference external" href="https://github.com/etsy/statsd">statsd</a> server supports a number of different data types, and performs
different aggregation on each of them. The three main types are <em>counters</em>,
<em>timers</em>, and <em>gauges</em>.</p>
<p>The statsd server collects and aggregates in 30 second intervals before
flushing to <a class="reference external" href="https://graphite.readthedocs.io">Graphite</a>. Graphite usually stores the most recent data in 1-minute
averaged buckets, so when you’re looking at a graph, for each stat you are
typically seeing the average value over that minute.</p>
<section id="counters">
<span id="counter-type"></span><h2>Counters<a class="headerlink" href="#counters" title="Permalink to this heading"></a></h2>
<p><em>Counters</em> are the most basic and default type. They are treated as a count of
a type of event per second, and are, in <a class="reference external" href="https://graphite.readthedocs.io">Graphite</a>, typically averaged over one
minute. That is, when looking at a graph, you are usually seeing the average
number of events per second during a one-minute period.</p>
<p>The statsd server collects counters under the <code class="docutils literal notranslate"><span class="pre">stats</span></code> prefix.</p>
<p>Counters are managed with the <a class="reference internal" href="reference.html#StatsClient.incr" title="StatsClient.incr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatsClient.incr()</span></code></a> and
<a class="reference internal" href="reference.html#StatsClient.decr" title="StatsClient.decr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatsClient.decr()</span></code></a> methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsd</span> <span class="kn">import</span> <span class="n">StatsClient</span>

<span class="n">statsd</span> <span class="o">=</span> <span class="n">StatsClient</span><span class="p">()</span>

<span class="n">statsd</span><span class="o">.</span><span class="n">incr</span><span class="p">(</span><span class="s1">&#39;some.event&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can increment a counter by more than one by passing a second parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statsd</span><span class="o">.</span><span class="n">incr</span><span class="p">(</span><span class="s1">&#39;some.other.event&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">rate</span></code> parameter to produce sampled data. The statsd
server will take the sample rate into account, and the <a class="reference internal" href="reference.html#StatsClient" title="StatsClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatsClient</span></code></a>
will only send data <code class="docutils literal notranslate"><span class="pre">rate</span></code> percent of the time. This can help the statsd
server stay responsive with extremely busy applications.</p>
<p><code class="docutils literal notranslate"><span class="pre">rate</span></code> is a float between 0 and 1:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Increment this counter 10% of the time.</span>
<span class="n">statsd</span><span class="o">.</span><span class="n">incr</span><span class="p">(</span><span class="s1">&#39;some.third.event&#39;</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>Because the statsd server is aware of the sampling, it will still show you the
true average rate per second.</p>
<p>You can also decrement counters. The <a class="reference internal" href="reference.html#StatsClient.decr" title="StatsClient.decr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatsClient.decr()</span></code></a> method takes
the same arguments as <code class="docutils literal notranslate"><span class="pre">incr</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statsd</span><span class="o">.</span><span class="n">decr</span><span class="p">(</span><span class="s1">&#39;some.other.event&#39;</span><span class="p">)</span>
<span class="c1"># Decrease the counter by 5, 15% sample.</span>
<span class="n">statsd</span><span class="o">.</span><span class="n">decr</span><span class="p">(</span><span class="s1">&#39;some.third.event&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="timers">
<span id="timer-type"></span><h2>Timers<a class="headerlink" href="#timers" title="Permalink to this heading"></a></h2>
<p><em>Timers</em> are meant to track how long something took. They are an invaluable
tool for tracking application performance.</p>
<p>The statsd server collects all timers under the <code class="docutils literal notranslate"><span class="pre">stats.timers</span></code> prefix, and
will calculate the lower bound, mean, 90th percentile, upper bound, and count
of each timer for each period (by the time you see it in Graphite, that’s
usually per minute).</p>
<ul class="simple">
<li><p>The <em>lower bound</em> is the lowest value statsd saw for that stat during that
time period.</p></li>
<li><p>The <em>mean</em> is the average of all values statsd saw for that stat during that
time period.</p></li>
<li><p>The <em>90th percentile</em> is a value <em>x</em> such that 90% of all the values statsd
saw for that stat during that time period are below <em>x</em>, and 10% are above.
This is a great number to try to optimize.</p></li>
<li><p>The <em>upper bound</em> is the highest value statsd saw for that stat during that
time period.</p></li>
<li><p>The <em>count</em> is the number of timings statsd saw for that stat during that
time period. It is not averaged.</p></li>
</ul>
<p>The statsd server only operates in millisecond timings. Everything should be
converted to milliseconds.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rate</span></code> parameter will sample the data being sent to the statsd server,
but in this case it doesn’t make sense for the statsd server to take it into
account (except possibly for the <em>count</em> value, but then it would be lying
about how much data it averaged).</p>
<p>See the <a class="reference internal" href="timing.html#timing-chapter"><span class="std std-ref">timing documentation</span></a> for more detail on using
timers with Statsd.</p>
</section>
<section id="gauges">
<span id="gauge-type"></span><h2>Gauges<a class="headerlink" href="#gauges" title="Permalink to this heading"></a></h2>
<p><em>Gauges</em> are a constant data type. They are not subject to averaging, and they
don’t change unless you change them. That is, once you set a gauge value, it
will be a flat line on the graph until you change it again.</p>
<p>Gauges are useful for things that are already averaged, or don’t need to reset
periodically. System load, for example, could be graphed with a gauge. You
might use <a class="reference internal" href="reference.html#StatsClient.incr" title="StatsClient.incr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatsClient.incr()</span></code></a> to count the number of logins to a
system, but a gauge to track how many active WebSocket connections you have.</p>
<p>The statsd server collects gauges under the <code class="docutils literal notranslate"><span class="pre">stats.gauges</span></code> prefix.</p>
<p>The <a class="reference internal" href="reference.html#StatsClient.gauge" title="StatsClient.gauge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatsClient.gauge()</span></code></a> method also support the <code class="docutils literal notranslate"><span class="pre">rate</span></code> parameter to
sample data back to the statsd server, but use it with care, especially with
gauges that may not be updated very often.</p>
<section id="gauge-deltas">
<h3>Gauge Deltas<a class="headerlink" href="#gauge-deltas" title="Permalink to this heading"></a></h3>
<p>Gauges may be <em>updated</em> (as opposed to <em>set</em>) by setting the <code class="docutils literal notranslate"><span class="pre">delta</span></code> keyword
argument to <code class="docutils literal notranslate"><span class="pre">True</span></code>. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statsd</span><span class="o">.</span><span class="n">gauge</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">70</span><span class="p">)</span>  <span class="c1"># Set the &#39;foo&#39; gauge to 70.</span>
<span class="n">statsd</span><span class="o">.</span><span class="n">gauge</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Set &#39;foo&#39; to 71.</span>
<span class="n">statsd</span><span class="o">.</span><span class="n">gauge</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Set &#39;foo&#39; to 68.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Support for gauge deltas was added to the server in 0.6.0.</p>
</div>
</section>
</section>
<section id="sets">
<span id="set-type"></span><h2>Sets<a class="headerlink" href="#sets" title="Permalink to this heading"></a></h2>
<p><em>Sets</em> count the number of unique values passed to a key.</p>
<p>For example, you could count the number of users accessing your system using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statsd</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">userid</span><span class="p">)</span>
</pre></div>
</div>
<p>If <a class="reference internal" href="reference.html#StatsClient.set" title="StatsClient.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StatsClient.set()</span></code></a> is called multiple times with the same userid
in the same sample period, that userid will only be counted once.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="configure.html" class="btn btn-neutral float-left" title="Configuring Statsd" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="timing.html" class="btn btn-neutral float-right" title="Using Timers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015, James Socol.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>